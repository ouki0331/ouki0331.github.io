
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title> | Hexo</title>
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="https://static-argvchs.netlify.app/images/avatar.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>


<script src="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/katex.min.css" />
<script src="/js/lib/math.js"></script>


<script src="/js/lib/preview.js"></script>









<script src="https://s4.zstatic.net/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<link rel="stylesheet" href="/css/main.css" />
<link rel="preconnect" href="https://static-argvchs.netlify.app" />

<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>HEXO</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;HEXO</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1></h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2025/8/24
        </span>
        
        
    </div>
    
    <div class="content" v-pre>
        <hr>
<h2 id="title-ラッパー関数date-2025-08-23-21-39-31tags"><a href="#title-ラッパー関数date-2025-08-23-21-39-31tags" class="headerlink" title="title: ラッパー関数date: 2025-08-23 21:39:31tags:"></a>title: ラッパー関数<br>date: 2025-08-23 21:39:31<br>tags:</h2><pre><code class="language-php">/**
     * バージョン7.3.33のPHPでも互換性を持つstrlen関数の代替
     * @param mixed $string
     * @return int|null
     */
    public static function strlen_v2($string=&quot;&quot;):int|null
    &#123;
        try&#123;
            //php 7.3.33はnullを返す
            if(is_object($string)||is_array($string))&#123;
                return null;
            &#125;
            //php 7.3.33は0を返す
            if(is_null($string))&#123;
                return 0;
            &#125; 
            //他には文字列として処理する、整数か少数はphp 7.3.33とphp8.4.8は全く同じだ。
            return strlen($string);
        &#125;catch(\Throwable $th)&#123;
            self::writeErrorLog($th);
            return null;
        &#125;
    &#125;

    /**
     *  バージョン7.3.33のPHPでも互換性を持つsubstr関数の代替
     * 二番目と三番目パラメータは整数以外のタイプで渡す場合は確認できなかった、もしあれば、調整必要があるでしょう
     * @param mixed $string
     * @param int $offset
     * @param mixed $length
     * @return string|null
     */
    public static function substr_v2($string, int $offset, ?int $length = null): string|null
    &#123;
        try&#123;
            //PHP 7.3.33　と同じ
            if(is_array($string)||is_object($string))&#123;
                return null;
            &#125;
            if(is_null($string))&#123;
                return &quot;&quot;;
            &#125;
            return substr($string,$offset,$length);
        &#125;catch(\Throwable $th)&#123;
            self::writeErrorLog($th);
            return null;
        &#125;
    &#125;


    /**
     * バージョン7.3.33 のPHPでも互換性を持つstrpos関数の代替
     * @param mixed $haystack
     * @param mixed $needle
     * @param int $offset
     * @return bool|int|null
     */
    public static function strpos_v2($haystack,$needle, int $offset = 0):int|bool|null&#123;
        try&#123;
            if(is_null($haystack))&#123;
                return false;
            &#125;
            if(is_array($haystack)||is_object($haystack))&#123;
                return null;
            &#125;
            return strpos($haystack,$needle,$offset);
        &#125;catch(\Throwable $th)&#123;
            self::writeErrorLog($th);
            return false;
        &#125;
    &#125;

    /**
     * バージョン7.3.33 のPHPでも互換性を持つstr_replace関数の代替
     * @param mixed $search
     * @param mixed $replace
     * @param mixed $subject
     * @param int $count
     * @return array|string
     */
    public static function str_replace_v2(
        $search,
        $replace,
        $subject,
        ?int &amp;$count = null
    ): string|array&#123;
        $search=$search??&quot;&quot;;
        $replace=$replace??&quot;&quot;;
        $subject=$subject??&quot;&quot;;
        return str_replace($search,$replace,$subject,$count);
    &#125;

    /**
     * バージョン7.3.33 のPHPでも互換性を持つimplode関数の代替
     */
    public static function implode_v2($separator_or_array, $array = null): ?string
    &#123;
        try &#123;
            if ($array === null) &#123;
                return is_array($separator_or_array) ? implode(&#39;&#39;, $separator_or_array) : null;
            &#125;
            if (is_array($separator_or_array) &amp;&amp; !is_array($array)) &#123;
                [$separator_or_array, $array] = [$array, $separator_or_array];
            &#125;
            if (!is_array($array)) return null;
            $separator = $separator_or_array ?? &#39;&#39;;
            if (is_array($separator) || is_object($separator)) return null;
            return implode((string)$separator, $array);
        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return null;
        &#125;
    &#125;

    /**
     * PHP 7.1の挙動をエミュレートするcount関数の代替（非推奨）
     * // --- 挙動の確認 ---
     * // echo count_v2([&#39;a&#39;, &#39;b&#39;]); // 2
     * // echo count_v2([]);         // 0
     * // echo count_v2(null);       // 0 (正しく0になる)
     * // echo count_v2(&quot;string&quot;);   // 1 (古い挙動)
     * // echo count_v2(123);        // 1 (古い挙動)
     * @param mixed $value
     * @return int|null
     */
    public static  function count_v2($value)
    &#123;
        try &#123;
            // 1. is_countableならcount()
            if (is_countable($value)) &#123;
                return count($value);
            &#125;
            // 2. nullなら0を返す（最重要）
            if (is_null($value)) &#123;
                return 0;
            &#125;
            // 3. それ以外の数えられない型（スカラー値など）は1を返す
            return 1;

        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return 0;
        &#125;
    &#125;


    /**
     * バージョン7.3.33のPHPでも互換性を持つarray_merge関数の代替
     * PHP 7.3.33の挙動に合わせ、引数に配列以外の値（nullを含む）が含まれていた場合にnullを返します。
     * @param mixed ...$arrays マージする配列。
     * @return array|null マージされた配列、またはエラー時にnull。
     */
    public static  function array_merge_v2(...$arrays): ?array
    &#123;
        try &#123;
            // PHP 7.3では、引数なしで呼び出すとWarningを出してNULLを返す。PHP 8では空配列を返す。
            // 7.3の挙動に合わせるため、引数がなければnullを返す。
            if (empty($arrays)) &#123;
                return null;
            &#125;

            // 全ての引数をチェックし、一つでも配列でなければnullを返す。
            // これにより、PHP 7.3の「Warningを出してNULLを返す」挙動をエミュレートし、
            // PHP 8以降で発生するTypeErrorを未然に防ぐ。
            foreach ($arrays as $array) &#123;
                if (!is_array($array)) &#123;
                    return null;
                &#125;
            &#125;
            // 全ての引数が配列であることが確認できたので、安全にネイティブ関数を呼び出す。
            return array_merge(...$arrays);

        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return null;
        &#125;
    &#125;

    /**
     * バージョン7.3.33のPHPでも互換性を持つarray_keys関数の代替
     * @param mixed $array
     * @param mixed $search_value
     * @param bool $strict
     * @return array|null
     */
    public static  function array_keys_v2($array, $search_value = null, bool $strict = false): ?array
    &#123;
        try &#123;
            // PHP 7.3.33: nullや非配列はWarning → PHP 8+: TypeError
            if (is_null($array) || !is_array($array)) &#123;
                return null;
            &#125;
            // 第二引数がnullでない場合は検索値として使用
            if (func_num_args() &gt; 1) &#123;
                return array_keys($array, $search_value, $strict);
            &#125;
            return array_keys($array);
        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return null;
        &#125;
    &#125;

    /**
     * バージョン7.3.33のPHPでも互換性を持つarray_values関数の代替
     * @param mixed $array
     * @return array|null
     */
    public static function array_values_v2($array): ?array
    &#123;
        try &#123;
            // PHP 7.3.33: nullや非配列はWarning → PHP 8+: TypeError
            if (is_null($array) || !is_array($array)) &#123;
                return null;
            &#125;
            return array_values($array);
        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return null;
        &#125;
    &#125;

    /**
     * バージョン7.3.33のPHPでも互換性を持つin_array関数の代替
     * @param mixed $needle
     * @param mixed $haystack
     * @param bool $strict
     * @return bool|null
     */
    public static function in_array_v2($needle, $haystack, bool $strict = false): ?bool
    &#123;
        try &#123;
            // PHP 7.3.33: nullや非配列はWarning → PHP 8+: TypeError
            if (is_null($haystack) || !is_array($haystack)) &#123;
                return null;
            &#125;
            return in_array($needle, $haystack, $strict);
        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return null;
        &#125;
    &#125;

    /**
     * バージョン7.3.33のPHPでも互換性を持つarray_key_exists関数の代替
     * @param mixed $key
     * @param mixed $array
     * @return bool|null
     */
    public static function array_key_exists_v2($key, $array): ?bool
    &#123;
        try &#123;
            // PHP 7.3.33: nullや非配列はWarning → PHP 8+: TypeError
            if (!is_array($array) &amp;&amp; !is_object($array)) &#123;
                return null;
            &#125;

            // キーが配列やオブジェクトの場合
            if (is_array($key) || is_object($key)) &#123;
                return false;
            &#125;
            return array_key_exists($key, $array);
        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return null;
        &#125;
    &#125;


    /**
     * バージョン7.3.33のPHPでも互換性を持つjson_decode関数の代替
     * PHP 8+で非文字列を渡した際に発生するTypeErrorを抑制し、PHP 7.3の挙動をエミュレートします。
     * @param mixed $json デコード対象のJSON文字列。
     * @param bool|null $assoc trueの場合、返されるオブジェクトは連想配列に変換されます。
     * @param int $depth 再帰の深さ。
     * @param int $flags JSONデコード時のオプションを指定するビットマスク。
     * @return mixed デコードされた値を返します。エラー時や互換性のない型の場合はnullを返すことがあります。
     */
    public static function json_decode_v2($json, ?bool $assoc = null, int $depth = 512, int $flags = 0)
    &#123;
        try &#123;
            // PHP 8+ではTypeErrorが発生する非文字列型を、PHP 7.3の挙動に基づき事前処理する
            if (!is_string($json)) &#123;
                if(is_bool($json))&#123;
                    return json_decode($json, $assoc, $depth, $flags);
                &#125;
                // PHP 7.3では、数値や真偽値はそのまま返される
                if (is_int($json) || is_float($json)) &#123;
                    return $json;
                &#125;
                // PHP 7.3では、null、配列、オブジェクトは警告を出しつつnullを返す
                if (is_null($json) || is_array($json) || is_object($json)) &#123;
                    return null;
                &#125;
            &#125;
            // 入力が文字列の場合、または上記以外の型の場合は、ネイティブ関数を呼び出す
            // PHP 7.3では第二引数 $assoc にnullを渡すとfalseとして扱われるため、シグネチャの互換性は保たれる
            return json_decode($json, $assoc, $depth, $flags);
        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return null; // 例外発生時はnullを返す
        &#125;
    &#125;

        /**
     * バージョン7.3.33のPHPでも互換性を持つ mb_strlen 関数の代替
     * @param mixed $string
     * @param string|null $encoding
     * @return int|null
     */
    public static function mb_strlen_v2($string = &quot;&quot;, ?string $encoding = null): ?int
    &#123;
        try &#123;
            if (is_object($string) || is_array($string)) &#123;
                return null; // PHP 7.3.33 の動作を模倣
            &#125;
            if (is_null($string)) &#123;
                return 0; // PHP 7.3.33 の動作を模倣
            &#125;
            $encoding = $encoding ?? mb_internal_encoding();
            return mb_strlen($string, $encoding);
        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return null;
        &#125;
    &#125;

    /**
     * バージョン7.3.33のPHPでも互換性を持つ mb_substr 関数の代替
     * @param mixed $string
     * @param int $offset
     * @param int|null $length
     * @param string|null $encoding
     * @return string|null
     */
    public static function mb_substr_v2($string, int $offset, ?int $length = null, ?string $encoding = null): ?string
    &#123;
        try &#123;
            if (is_array($string) || is_object($string)) &#123;
                return null; // PHP 7.3.33 と同じ
            &#125;
            if(is_null($string))&#123;
                return &quot;&quot;;
            &#125;
            $encoding = $encoding ?? mb_internal_encoding();
            // boolやnullは文字列にキャストして処理する
            return mb_substr($string, $offset, $length, $encoding);
        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return null;
        &#125;
    &#125;

    /**
     * バージョン7.3.33 のPHPでも互換性を持つ mb_strpos 関数の代替
     * @param mixed $haystack
     * @param mixed $needle
     * @param int $offset
     * @param string|null $encoding
     * @return bool|int|null
     */
    public static function mb_strpos_v2($haystack, $needle, int $offset = 0, ?string $encoding = null): int|bool|null
    &#123;
        try &#123;
            if (is_array($haystack) || is_object($haystack)) &#123;
                return null;
            &#125;
            if (is_null($haystack)) &#123;
                return false;
            &#125;
            $encoding = $encoding ?? mb_internal_encoding();
            return mb_strpos($haystack, $needle, $offset, $encoding);
        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return false;
        &#125;
    &#125;


        /**
     * バージョン7.3.33のPHPでも互換性を持つ explode 関数の代替
     * PHP 8+で発生するTypeErrorやValueErrorを抑制し、PHP 7.3の挙動（Warningを出してnullやfalseを返す）をエミュレートします。
     * @param mixed $separator 区切り文字。空文字列や配列などの互換性のない型を渡した場合、エラーを抑制してnullを返します。
     * @param mixed $string 分割する文字列。null、配列、オブジェクトなどの互換性のない型を渡した場合、エラーを抑制してnullを返します。
     * @param int $limit 分割の最大数を指定します。デフォルトはPHP_INT_MAX。
     * @return array|null 分割された文字列の配列。エラー時や互換性のない型の場合はnullを返します。
     */
    public static function explode_v2(mixed $separator, mixed $string, int $limit = PHP_INT_MAX): ?array
    &#123;
        try &#123;
            // PHP 8+ではTypeErrorやValueErrorが発生するケースを事前チェック

            // 1. 区切り文字($separator)のチェック
            // PHP 7.3では空文字列でWarning + false。PHP 8+ではValueError。
            // また、配列やオブジェクトはPHP 8+でTypeErrorの原因となる。
            if (is_array($separator) || is_object($separator)) &#123;
                return null;
            &#125;
            // bool, null, 数値などを安全に文字列化する
            $separator_str = (string)$separator;
            if ($separator_str === &#39;&#39;) &#123;
                // v2の設計思想に沿ってnullを返す
                return null;
            &#125;

            // 2. 分割対象文字列($string)のチェック
            // PHP 7.3ではnull, 配列, オブジェクトでWarning + nullを返す。PHP 8+ではTypeError。
            if (is_null($string) || is_array($string) || is_object($string)) &#123;
                return null;
            &#125;

            // ネイティブ関数を呼び出す。boolや数値は(string)でキャストされる。
            return explode($separator_str, (string)$string, $limit);

        &#125; catch (\Throwable $th) &#123;
            self::writeErrorLog($th);
            return null; // 例外発生時はnullを返す
        &#125;
    &#125;
</code></pre>

    </div>
    
    
    
    
    <div id="comment">
        <div id="giscus-container" class="giscus"></div>
    </div>
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2025 Hexo
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;John Doe
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    <script>
        console.log("Welcome to Argvchs' blog!");
        if (!window.hasOwnProperty("ontouchstart")) {
            let html = '<canvas id="fireworks" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 32767"></canvas><script src="https://static-argvchs.netlify.app/js/fireworks.min.js"><\/script>';
            document.body.append(document.createRange().createContextualFragment(html));
        }
    </script>
    
    
<script
    src="https://giscus.app/client.js"
    data-repo="argvchs/giscus-comments"
    data-repo-id="R_kgDOI_uC-w"
    data-category="Announcements"
    data-category-id="DIC_kwDOI_uC-84CUToF"
    data-mapping="pathname"
    data-strict="1"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="https://static-argvchs.netlify.app/css/giscus.css"
    data-lang="zh-CN"
    crossorigin
    async
></script>





    
</body>
</html>
